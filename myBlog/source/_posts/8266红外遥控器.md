---
title: 8266红外遥控器
date: 2021-06-08 20:59:03
tags:
---

# 采用8266DIY一个红外万能遥控器

## 引言

首先不知道为什么，小米它把红外万能遥控器给抛弃了，剩下的咸鱼价格巨高，大概是这样的：

最便宜的100块，第一个是骗子不发货的。为了实现夏天的空调自由，我们完全有理由选择自己DIY一个万能遥控。

![image-20210608210144264](image-20210608210144264.png)

## 硬件部分

主控MCU当然是我们的8266，谁用谁知道，便宜能联网而且现在8266卷的厉害，开发板10块左右的都有了。

剩余的材料则为一个红外接收器和红外发射器，加起来大概五元。

![image-20210608210455550](image-20210608210455550.png)

当然还有这种，价格太高了不在我们的考虑范围之内。因为我们解码、编码全是由Arduino的库来实现的，不用买带芯片的。

![image-20210608210600491](image-20210608210600491.png)

## 软件部分

### 库的加载

首先需要加载两个比较关键的库，这两个我都会打包进github,大家把他拷贝进如下目录即可

```
C:\Users\86155\Documents\Arduino\libraries
```

![image-20210608210935431](image-20210608210935431.png)

### 遥控编码的学习

首先将我们的红外接收模块与8266相连

VCC-->5V

GND-->GND

DATA-->D5

之后在Arduino中的文件->示例->IRremote8266目录下找到IRrecvDumpV2这个例程，点击上传。

上传成功后，在工具一栏打开串口监视器，这个时候应该会由于一些干扰收到杂乱的数据无视就好。

拿出你的空调遥控器，对准红外接收器，就像这样：

![image-20210608211828456](image-20210608211828456.png)

按下你需要学习的键，我这里学习了两个分别是开、关。如果一切顺利的话，串口将会出现如下输出：

![image-20210608212114800](image-20210608212114800.png)

将这个RawData数组记录下来我们之后的回放需要用到。

### 回放学习到的编码

获取到了遥控器的编码，接下来就是回放他。同时为了实现能够和小爱同学联动，我们需要借助一个中间的跳板，在这里我选择的是Blinker。

下载点灯科技手机APP，点击右上角的加号添加设备，选择独立设备，网络接入，通信服务商选择阿里云，记录下我们获取到的密钥。

接下来拔掉红外接受模块，换上我们的发射模块，引脚顺序一样，不需要改动：

![image-20210608212646790](image-20210608212646790.png)

打开Arduino的代码，修改密钥，wifi账号密码以及我们上面学习到的RawData,点击上传。

![image-20210608212837147](image-20210608212837147.png)

如果对代码感兴趣可以自行去看下官方的开发手册，[传送门](https://www.diandeng.tech/doc/xiaoai)。不出意外的话，你已经可以看到设备上线了。

### 按键的添加以及米家的绑定

在点灯APP中点击设备，点击右上角的小画笔，添加两个按键，键值分别为btn-pwron/btn-pwroff,点击保存。

![image-20210608213700734](image-20210608213700734.png)

保存完成后可以点击按键试一下看能否正常操控空调。

之后在米家中，我的->其他平台设备->绑定点灯科技的账号，点击同步，如果成功你就能看到你的设备了：

![image-20210608213913002](image-20210608213913002.png)

之后试下呼出你的小爱同学，看遥控是否正常，效果图：

![image-20210608214231349](image-20210608214231349.png)

大功告成，这样你就有了个属于你自己的万能遥控啦。总共花费20左右。

代码：[传送门](https://github.com/bznsix/8266IrRemote)

